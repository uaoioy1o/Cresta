{"version":3,"sources":["webpack://dov/webpack/universalModuleDefinition","webpack://dov/webpack/bootstrap","webpack://dov/./libs/utils.js","webpack://dov/./libs/default.js","webpack://dov/./libs/dov.js","webpack://dov/./libs/core/Dov.js","webpack://dov/./libs/core/InterceptorManager.js","webpack://dov/./libs/core/dispatchRequest.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isArray","Array","fn","ctx","args","arguments","length","apply","forEach","obj","cb","_typeof","merge","result","assignValue","val","extend","a","b","thisArg","isHttp","url","RegExp","test","data","header","method","dataType","responseType","Dov","require","defaultConfig","createInstance","instance","request","dov","instanceConfig","all","promises","Promise","InterceptorManager","dispatchRequest","defaults","this","interceptors","response","config","promise","resolve","chain","interceptor","push","fulfilled","rejected","undefined","then","shift","utils","handlers","use","eject","id","h","baseURL","reject","wx","_objectSpread","success","fail","error"],"mappings":"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","file":"dov.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dov\"] = factory();\n\telse\n\t\troot[\"dov\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","const isArray = Array.isArray\r\n/*\r\n* 判断是否为 HTTP 请求\r\n* @param url 请求的路径\r\n* @return Boolean\r\n*/\r\nfunction isHttp(url) {\r\n    return new RegExp(/^https?/).test(url)\r\n}\r\n/*\r\n* 改变上下文函数的上下文对象\r\n* @param fn 需要改变上下文的对象\r\n* @param ctx 上下文对象\r\n* @return wrap\r\n*/\r\nfunction bind(fn, ctx) {\r\n    return function wrap() {\r\n        let args = new Array(arguments.length)\r\n        for (let i = 0; i < args.length; i++) {\r\n            args[i] = arguments[i]\r\n        }\r\n        return fn.apply(ctx, args)\r\n    }\r\n}\r\n/*\r\n*   合并所有对象\r\n*   @params Object 需要合并的对象\r\n*   @return Object 合并后的对象\r\n*/\r\nfunction merge(/* obj1, obj2, obj3, ... */) {\r\n    let result = {}\r\n\r\n    function assignValue(val, key) {\r\n        if (typeof result[key] === 'object' && typeof val === 'object') {\r\n            result[key] = merge(result[key], val)\r\n        } else {\r\n            result[key] = val\r\n        }\r\n    }\r\n\r\n    for (let i = 0, l = arguments.length; i < l ;i++) {\r\n        forEach(arguments[i], assignValue)\r\n    }\r\n    return result\r\n}\r\n/*\r\n*  对数组和对象自生属性进行遍历\r\n*  @params obj 被遍历的对象\r\n*  @params cb 每次遍历到一个属性就调用一次回调函数\r\n*/\r\nfunction forEach(obj, cb) {\r\n    if (obj === null || typeof obj === 'undefined')\r\n        return\r\n    if (typeof obj !== 'object') {\r\n        obj = [obj]\r\n    }\r\n    if (isArray(obj)) {\r\n        // Iterate over array values\r\n        for (let i = 0, l = obj.length; i < l; i++) {\r\n            cb.call(null, obj[i], i, obj)\r\n        }\r\n    } else {\r\n        // Iterate over object keys\r\n        for (let key in obj) {\r\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n                cb.call(null, obj[key], key, obj)\r\n            }\r\n        }\r\n    }\r\n}\r\n/*\r\n*   继承所有的属性到对象上\r\n*   @params a 需要被继承属性的对象\r\n*   @params b 需要提供继承属性的对象\r\n*   @params thisArg 如果属性中有函数，可以通过此参数修改上下文对象\r\n*   @return Object 把继承完成的对象\r\n*/\r\nfunction extend(a, b, thisArg) {\r\n    forEach(b, function assignValue(val, key) {\r\n        if (thisArg && typeof val === 'function') {\r\n            a[key] = bind(val, thisArg)\r\n        } else {\r\n            a[key] = val\r\n        }\r\n    })\r\n    return a\r\n}\r\n\r\nmodule.exports = {\r\n    bind,\r\n    merge,\r\n    forEach,\r\n    extend,\r\n    isHttp\r\n}\r\n","module.exports = {\r\n    url: '',\r\n    data: {},\r\n    header: {},\r\n    method: 'POST',\r\n    dataType: 'json',\r\n    responseType: 'text'\r\n}\r\n","const Dov = require('./core/Dov')\r\nconst defaultConfig = require('./default')\r\n\r\nconst { bind, extend, merge } = require('./utils')\r\n\r\n// 工厂模式\r\nfunction createInstance(defaultConfig) {\r\n\r\n    // 1. 创建一个上下文对象\r\n    let ctx = new Dov(defaultConfig)\r\n\r\n    // 2. 放在请求的Promise 函数中\r\n    let instance = bind(Dov.prototype.request, ctx)\r\n\r\n    // 获取原型链上的所有属性\r\n    extend(instance, Dov.prototype, ctx)\r\n\r\n    // 获取上下文所有属性\r\n    extend(instance, ctx)\r\n\r\n    return instance\r\n}\r\n// 创建单例\r\nlet dov = createInstance(defaultConfig)\r\n// 单例函数\r\ndov.create = function(instanceConfig) {\r\n    return createInstance(merge(defaultConfig,instanceConfig))\r\n}\r\n// 用于继承\r\ndov.Dov = Dov\r\n// Promise 的 all 方法\r\ndov.all = function all(promises) {\r\n    return Promise.all(promises)\r\n}\r\n\r\nmodule.exports = dov\r\n","const InterceptorManager = require('./InterceptorManager')\r\nconst dispatchRequest = require('./dispatchRequest')\r\nconst { merge, bind, forEach } = require('../utils.js')\r\nconst defaults = require('../default')\r\n\r\nfunction Dov(defaultConfig) {\r\n    this.defaults = defaultConfig\r\n    this.interceptors = {\r\n        request: new InterceptorManager(),\r\n        response: new InterceptorManager()\r\n    }\r\n}\r\n\r\nDov.prototype.request = function(config) {\r\n    if (typeof config === 'string') {\r\n        config = merge({\r\n            url: arguments[0]\r\n        }, arguments[1])\r\n    }\r\n    config = merge(defaults, this.defaults, config)\r\n    let promise = Promise.resolve(config)\r\n\r\n    let chain = []\r\n\r\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\r\n        chain.push(interceptor.fulfilled, interceptor.rejected)\r\n    })\r\n    chain.push(dispatchRequest, undefined)\r\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\r\n        chain.push(interceptor.fulfilled, interceptor.rejected)\r\n    })\r\n    while (chain.length) {\r\n        promise = promise.then(chain.shift(), chain.shift())\r\n    }\r\n    return promise\r\n}\r\n\r\nforEach(['get', 'post', 'put', 'delete', 'trace', 'options', 'head', 'connect'], function forEachMethodNoData(method) {\r\n    Dov.prototype[method] = function(url, config) {\r\n        return this.request(merge(config || {}, {\r\n            method: method,\r\n            url: url\r\n        }))\r\n    }\r\n})\r\nmodule.exports = Dov\r\n","const utils = require('../utils')\r\n\r\nfunction InterceptorManager() {\r\n    this.handlers = []\r\n}\r\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\r\n    this.handlers.push({\r\n        fulfilled: fulfilled,\r\n        rejected: rejected\r\n    })\r\n    return this.handlers.length - 1\r\n}\r\nInterceptorManager.prototype.eject = function eject(id) {\r\n    if (this.handlers[id]) {\r\n        this.handlers[id] = null\r\n    }\r\n}\r\nInterceptorManager.prototype.forEach = function forEach(fn) {\r\n    utils.forEach(this.handlers, function forEachHandler(h) {\r\n        if (h !== null) {\r\n            fn(h)\r\n        }\r\n    })\r\n}\r\nmodule.exports = InterceptorManager\r\n","const { isHttp } = require('../utils')\r\n\r\nmodule.exports = function dispatchRequest(config) {\r\n    // 1. url 拼接。\r\n    if (!isHttp(config.url)) {\r\n        config.url = config.baseURL ? config.baseURL + config.url : config.url\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n        wx.request({\r\n            ...config,\r\n            success(result) {\r\n                resolve(result)\r\n            },\r\n            fail(error) {\r\n                reject(error)\r\n            }\r\n        })\r\n    })\r\n}\r\n"],"sourceRoot":""}