{"version":3,"sources":["webpack://dov/webpack/universalModuleDefinition","webpack://dov/webpack/bootstrap","webpack://dov/./libs/core/Dov.js","webpack://dov/./libs/core/InterceptorManager.js","webpack://dov/./libs/core/dispatchRequest.js","webpack://dov/./libs/default.js","webpack://dov/./libs/dov.js","webpack://dov/./libs/utils.js"],"names":["InterceptorManager","require","dispatchRequest","merge","bind","forEach","defaults","Dov","defaultConfig","interceptors","request","response","prototype","config","url","arguments","promise","Promise","resolve","chain","unshiftRequestInterceptors","interceptor","push","fulfilled","rejected","undefined","pushResponseInterceptors","length","then","shift","forEachMethodNoData","method","module","exports","utils","handlers","use","eject","id","fn","forEachHandler","h","isHttp","baseURL","reject","wx","success","result","fail","error","data","header","dataType","responseType","extend","createInstance","ctx","instance","dov","create","instanceConfig","all","promises","isArray","Array","RegExp","test","wrap","args","i","apply","assignValue","val","key","l","obj","cb","call","Object","hasOwnProperty","a","b","thisArg"],"mappings":"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","file":"dov.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dov\"] = factory();\n\telse\n\t\troot[\"dov\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./libs/dov.js\");\n","const InterceptorManager = require('./InterceptorManager')\r\nconst dispatchRequest = require('./dispatchRequest')\r\nconst { merge, bind, forEach } = require('../utils.js')\r\nconst defaults = require('../default')\r\n\r\nfunction Dov(defaultConfig) {\r\n    this.defaults = defaultConfig\r\n    this.interceptors = {\r\n        request: new InterceptorManager(),\r\n        response: new InterceptorManager()\r\n    }\r\n}\r\n\r\nDov.prototype.request = function(config) {\r\n    if (typeof config === 'string') {\r\n        config = merge({\r\n            url: arguments[0]\r\n        }, arguments[1])\r\n    }\r\n    config = merge(defaults, this.defaults, config)\r\n    let promise = Promise.resolve(config)\r\n\r\n    let chain = []\r\n\r\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\r\n        chain.push(interceptor.fulfilled, interceptor.rejected)\r\n    })\r\n    chain.push(dispatchRequest, undefined)\r\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\r\n        chain.push(interceptor.fulfilled, interceptor.rejected)\r\n    })\r\n    while (chain.length) {\r\n        promise = promise.then(chain.shift(), chain.shift())\r\n    }\r\n    return promise\r\n}\r\n\r\nforEach(['get', 'post', 'put', 'delete', 'trace', 'options', 'head', 'connect'], function forEachMethodNoData(method) {\r\n    Dov.prototype[method] = function(url, config) {\r\n        return this.request(merge(config || {}, {\r\n            method: method,\r\n            url: url\r\n        }))\r\n    }\r\n})\r\nmodule.exports = Dov\r\n","const utils = require('../utils')\r\n\r\nfunction InterceptorManager() {\r\n    this.handlers = []\r\n}\r\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\r\n    this.handlers.push({\r\n        fulfilled: fulfilled,\r\n        rejected: rejected\r\n    })\r\n    return this.handlers.length - 1\r\n}\r\nInterceptorManager.prototype.eject = function eject(id) {\r\n    if (this.handlers[id]) {\r\n        this.handlers[id] = null\r\n    }\r\n}\r\nInterceptorManager.prototype.forEach = function forEach(fn) {\r\n    utils.forEach(this.handlers, function forEachHandler(h) {\r\n        if (h !== null) {\r\n            fn(h)\r\n        }\r\n    })\r\n}\r\nmodule.exports = InterceptorManager\r\n","const { isHttp } = require('../utils')\r\n\r\nmodule.exports = function dispatchRequest(config) {\r\n    // 1. url 拼接。\r\n    if (!isHttp(config.url)) {\r\n        config.url = config.baseURL ? config.baseURL + config.url : config.url\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n        wx.request({\r\n            ...config,\r\n            success(result) {\r\n                resolve(result)\r\n            },\r\n            fail(error) {\r\n                reject(error)\r\n            }\r\n        })\r\n    })\r\n}\r\n","module.exports = {\r\n    url: '',\r\n    data: {},\r\n    header: {},\r\n    method: 'POST',\r\n    dataType: 'json',\r\n    responseType: 'text'\r\n}\r\n","const Dov = require('./core/Dov')\r\nconst defaultConfig = require('./default')\r\n\r\nconst { bind, extend, merge } = require('./utils')\r\n\r\n// 工厂模式\r\nfunction createInstance(defaultConfig) {\r\n\r\n    // 1. 创建一个上下文对象\r\n    let ctx = new Dov(defaultConfig)\r\n\r\n    // 2. 放在请求的Promise 函数中\r\n    let instance = bind(Dov.prototype.request, ctx)\r\n\r\n    // 获取原型链上的所有属性\r\n    extend(instance, Dov.prototype, ctx)\r\n\r\n    // 获取上下文所有属性\r\n    extend(instance, ctx)\r\n\r\n    return instance\r\n}\r\n// 创建单例\r\nlet dov = createInstance(defaultConfig)\r\n// 单例函数\r\ndov.create = function(instanceConfig) {\r\n    return createInstance(merge(defaultConfig,instanceConfig))\r\n}\r\n// 用于继承\r\ndov.Dov = Dov\r\n// Promise 的 all 方法\r\ndov.all = function all(promises) {\r\n    return Promise.all(promises)\r\n}\r\n\r\nmodule.exports = dov\r\n","const isArray = Array.isArray\r\n/*\r\n* 判断是否为 HTTP 请求\r\n* @param url 请求的路径\r\n* @return Boolean\r\n*/\r\nfunction isHttp(url) {\r\n    return new RegExp(/^https?/).test(url)\r\n}\r\n/*\r\n* 改变上下文函数的上下文对象\r\n* @param fn 需要改变上下文的对象\r\n* @param ctx 上下文对象\r\n* @return wrap\r\n*/\r\nfunction bind(fn, ctx) {\r\n    return function wrap() {\r\n        let args = new Array(arguments.length)\r\n        for (let i = 0; i < args.length; i++) {\r\n            args[i] = arguments[i]\r\n        }\r\n        return fn.apply(ctx, args)\r\n    }\r\n}\r\n/*\r\n*   合并所有对象\r\n*   @params Object 需要合并的对象\r\n*   @return Object 合并后的对象\r\n*/\r\nfunction merge(/* obj1, obj2, obj3, ... */) {\r\n    let result = {}\r\n\r\n    function assignValue(val, key) {\r\n        if (typeof result[key] === 'object' && typeof val === 'object') {\r\n            result[key] = merge(result[key], val)\r\n        } else {\r\n            result[key] = val\r\n        }\r\n    }\r\n\r\n    for (let i = 0, l = arguments.length; i < l ;i++) {\r\n        forEach(arguments[i], assignValue)\r\n    }\r\n    return result\r\n}\r\n/*\r\n*  对数组和对象自生属性进行遍历\r\n*  @params obj 被遍历的对象\r\n*  @params cb 每次遍历到一个属性就调用一次回调函数\r\n*/\r\nfunction forEach(obj, cb) {\r\n    if (obj === null || typeof obj === 'undefined')\r\n        return\r\n    if (typeof obj !== 'object') {\r\n        obj = [obj]\r\n    }\r\n    if (isArray(obj)) {\r\n        // Iterate over array values\r\n        for (let i = 0, l = obj.length; i < l; i++) {\r\n            cb.call(null, obj[i], i, obj)\r\n        }\r\n    } else {\r\n        // Iterate over object keys\r\n        for (let key in obj) {\r\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n                cb.call(null, obj[key], key, obj)\r\n            }\r\n        }\r\n    }\r\n}\r\n/*\r\n*   继承所有的属性到对象上\r\n*   @params a 需要被继承属性的对象\r\n*   @params b 需要提供继承属性的对象\r\n*   @params thisArg 如果属性中有函数，可以通过此参数修改上下文对象\r\n*   @return Object 把继承完成的对象\r\n*/\r\nfunction extend(a, b, thisArg) {\r\n    forEach(b, function assignValue(val, key) {\r\n        if (thisArg && typeof val === 'function') {\r\n            a[key] = bind(val, thisArg)\r\n        } else {\r\n            a[key] = val\r\n        }\r\n    })\r\n    return a\r\n}\r\n\r\nmodule.exports = {\r\n    bind,\r\n    merge,\r\n    forEach,\r\n    extend,\r\n    isHttp\r\n}\r\n"],"sourceRoot":""}